<!DOCTYPE html>
<html lang="en">
<!-- Head section remains the same -->
<head>
    <!-- Your existing head content -->
</head>
<body>
    <div class="container">
        <div id="input-section">
            <input type="text" id="url-input" 
                   placeholder="Enter GitHub markdown URL or paste full URL in browser address bar" 
                   value="">
            <button onclick="window.loadMarkdown()">Load Markdown</button>
        </div>
        <div id="error"></div>
        <div class="loading" id="loading">Loading markdown content...</div>
        <div id="content"></div>
    </div>

    <script>
        // Your existing functions remain the same until the URL handling part

        // Enhanced URL handling
        window.addEventListener('load', () => {
            let mdUrl;
            
            // First try URL parameter (backward compatibility)
            const urlParams = new URLSearchParams(window.location.search);
            mdUrl = urlParams.get('url');
            
            // If no URL parameter, try direct path
            if (!mdUrl) {
                const basePathIndex = window.location.pathname.indexOf('/markdown-browser-viewer/');
                if (basePathIndex !== -1) {
                    // Get everything after /markdown-browser-viewer/
                    mdUrl = window.location.pathname.substring(basePathIndex + '/markdown-browser-viewer/'.length);
                    
                    if (mdUrl) {
                        // Decode the URL
                        mdUrl = decodeURIComponent(mdUrl);
                        
                        // Handle case where URL might start with 'https://' or just 'github.com'
                        if (!mdUrl.startsWith('https://')) {
                            mdUrl = 'https://' + mdUrl;
                        }
                        
                        console.log('Extracted URL:', mdUrl); // Debug log
                    }
                }
            }

            if (mdUrl) {
                document.getElementById('url-input').value = mdUrl;
                window.loadMarkdown();
            } else {
                document.getElementById('loading').style.display = 'none';
            }
        });

        // Rest of your script remains the same
    </script>
</body>
</html>
